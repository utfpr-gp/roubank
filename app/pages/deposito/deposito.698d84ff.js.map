{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCCO,SAASC,EAAYC,EAAOC,EAAKC,EAAMC,GAC5CC,KAAKJ,MAAQA,EACbI,KAAKH,IAAMA,EACXG,KAAKF,KAAOA,EACZE,KAAKD,KAAOA,SD6EVE,OAAS,oBACRC,cAAA,iBAAAC,SAAA,SAAAC,GACHA,EAAAC,gCAlEET,GAAEU,EAAA,kBAA2BC,SAC7BX,EAAE,EAQJ,OAHEU,EAAA,kBAAaE,SAAA,oBACdF,EAAA,wBAAAG,KAAA,6DAAAC,YAAAC,MAAA,KAAAC,WAES,EAGV,MAAIC,EAAMC,KAAQC,MAAAC,aAAAC,QAAAxB,EAAAyB,eAGlB,IAAArB,EAAAD,EAAAH,EAAA0B,YACIC,EAAOxB,EAAWC,EAElBwB,EAAAC,WAAiBN,aAAAC,QAAAxB,EAAA8B,kBACnBC,EAAQH,EACRD,EAAOC,GACPA,GAAQD,EACTvB,GAAMuB,EACLA,EAAW,IAEXA,GAASC,EACVxB,GAAAwB,EAEDA,EAAA,GAIAL,aAAIS,QAAchC,EAAI8B,gBAAYF,GAClCR,EAAKa,SAAAN,EACL,IAAAO,EAAa,IAAQhC,EAAcyB,EAAKvB,EAAUJ,EAAOmC,aAAA,IAAAC,MAEzDhB,EAAEiB,aAAAC,KAAAJ,GAcFX,aAAES,QAAkBhC,EAAQyB,aAAAJ,KAAAkB,UAAAnB,IAE5BP,EAAA,wBAAa2B,YAAA,OAAAzB,SAAA,QAAAC,KAAA,kBAAAW,EAAAc,QAAA,gEACd,IAAAzC,EAAA0B,uGAEDK,EAAAU,QAAA,OAAAxB,YAAAC,MAEG,KACHC,UACEN,EAAA,kBAASC,IAAc","sources":["app/pages/deposito/deposit.js","app/model/transaction.js"],"sourcesContent":["'use strict';\r\n\r\nimport {\r\n  DEPOSIT_TYPE,\r\n  TAX_DEPOSIT,\r\n  TOTAL_COSTS_KEY,\r\n  USERNAME_KEY,\r\n} from '/app/util/shared.js';\r\n\r\nimport { Transaction } from '/app/model/transaction.js';\r\n\r\n/**\r\n\tRealiza o depósito\r\n*/\r\nfunction doDeposit() {\r\n  let value = +$('#input-deposit').val();\r\n\r\n  if (value < 5) {\r\n    $('#input-deposit').addClass('my-invalid-input');\r\n    $('#div-deposit-message')\r\n      .html('Opps!!! O valor precisa ser maior que ou igual a 5 Reais.')\r\n      .slideDown()\r\n      .delay(3000)\r\n      .slideUp();\r\n    return false;\r\n  }\r\n\r\n  const user = JSON.parse(localStorage.getItem(USERNAME_KEY));\r\n\r\n  //tarifa de deposito\r\n  let tax = value * TAX_DEPOSIT;\r\n  let netValue = value - tax;\r\n\r\n  //custos para visualização do saldo e extrato\r\n  let cost = parseFloat(localStorage.getItem(TOTAL_COSTS_KEY));\r\n  let costBefore = cost;\r\n  if (netValue < cost) {\r\n    cost -= netValue;\r\n    tax += netValue;\r\n    netValue = 0;\r\n  } else {\r\n    netValue = netValue - cost;\r\n    tax += cost;\r\n    cost = 0;\r\n  }\r\n\r\n  //persiste novamente o custo\r\n  localStorage.setItem(TOTAL_COSTS_KEY, cost);\r\n\r\n  user.balance += netValue;\r\n  let transaction = new Transaction(netValue, tax, DEPOSIT_TYPE, new Date());\r\n  user.transactions.push(transaction);\r\n  localStorage.setItem(USERNAME_KEY, JSON.stringify(user));\r\n\r\n  $('#div-deposit-message')\r\n    .removeClass('red')\r\n    .addClass('blue')\r\n    .html(\r\n      `Depósito de R$ ${netValue.toFixed(\r\n        2\r\n      )} efetuado com sucesso considerando a pequena taxa \r\n    de ${TAX_DEPOSIT * 100}% e os pequenos custos acumulados\r\n    de visualização de saldo e extrato no valor de R$ ${costBefore.toFixed(2)}!`\r\n    )\r\n    .slideDown()\r\n    .delay(3000)\r\n    .slideUp();\r\n\r\n  $('#input-deposit').val('');\r\n\r\n  return false;\r\n}\r\n\r\n/**\r\n * Dispara quando o DOM está pronto e também os recursos dependentes (CSS, Imagens e JS)\r\n */\r\nwindow.onload = function () {\r\n  document.querySelector('#form-deposit').onsubmit = function (e) {\r\n    e.preventDefault();\r\n    doDeposit();\r\n  };\r\n  $('.money').mask('000.00', {\r\n    reverse: true,\r\n  });\r\n};\r\n","'use strict';\r\nexport function Transaction(value, tax, type, date) {\r\n  this.value = value;\r\n  this.tax = tax;\r\n  this.type = type;\r\n  this.date = date;\r\n}\r\n"],"names":["$bV6rM","parcelRequire","$0f5bed92a4ab5602$export$febc5573c75cefb0","value","tax","type","date","this","onload","querySelector","onsubmit","e","preventDefault","$","val","addClass","html","slideDown","delay","slideUp","user","JSON","parse","localStorage","getItem","USERNAME_KEY","TAX_DEPOSIT","netValue","cost","parseFloat","TOTAL_COSTS_KEY","costBefore","setItem","balance","transaction","DEPOSIT_TYPE","Date","transactions","push","stringify","removeClass","toFixed"],"version":3,"file":"deposito.698d84ff.js.map"}