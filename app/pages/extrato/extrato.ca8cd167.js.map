{"mappings":"AAsBA,SAAAA,EAAoBC,UACXC,SAASD,GAAQ,GAAK,IAAMA,EAAOA,EAiB5CE,GAAE,eAGIC,EAFaC,aAAaC,QArCV,aAuCI,aAAe,qBACvCH,EAAE,SAASI,KAAKH,GAChBD,EAAE,WAAWI,KAAK,gBAElBC,YAAW,WACTL,EAAE,YAAYM,UACdC,SAASC,cAAc,SAASC,iBA9BvBC,MAAOC,gBA+Bf,QCRLX,GAAE,YAjCF,eACMY,EAAaC,WAAWX,aAAaC,QDPzB,WCQhBS,GDCgC,ICAhCV,aAAaY,QDTG,SCSsBF,OAElCG,EAAOC,KAAKC,MAAMf,aAAaC,QDZhB,sBCcbe,EAAeH,EAAKG,iBACtBC,EAAOnB,EAAE,oBAAoBoB,eAExBC,KAAKH,EAAAA,KACRI,EAAIJ,EAAaG,GACrBF,GACE,WDMFtB,GAF2B0B,ECJzB,IACmBb,KAAKY,EAAExB,ODKf0B,WACb,IACA3B,EAAW0B,EAAEE,YACb,IACA5B,EAAW0B,EAAEZ,eCRX,YACAW,EAAEI,KACF,YACAJ,EAAEK,MAAMC,QAAQ,GAChB,YACAN,EAAEO,IAAID,QAAQ,GACd,aDJC,IAAwBL,ECO7BvB,EAAE,oBAAoBoB,KAAKD,GAG3BnB,EAAE,gBAAgBmB,KAAK,MAAQJ,EAAKe,QAAQF,QAAQ,IAOpDG","sources":["./app/util/shared.js","./app/pages/extrato/bank-statement.js"],"sourcesContent":["'use strict';\r\n\r\nconst USERNAME_KEY = 'tomaz.leite';\r\nconst COSTS_KEY = 'custos';\r\nconst LOGGED_IN_KEY = 'eh_logado';\r\n\r\nexport const WITHDRAW_TYPE = 'saque';\r\nexport const DEPOSIT_TYPE = 'deposito';\r\n\r\nexport const TAX_DEPOSIT = 0.01;\r\nexport const TAX_WITHDRAW = 0.02;\r\nexport const TAX_BALANCE = 0.25;\r\nexport const TAX_BANK_STATEMENT = 0.25;\r\n\r\n/**\r\n * Retorna o ano corrente com quatro dígitos.\r\n * @returns\r\n */\r\nfunction currentYear() {\r\n  return new Date().getFullYear();\r\n}\r\n\r\nfunction formatZero(date) {\r\n  return parseInt(date) < 10 ? '0' + date : date;\r\n}\r\n\r\nexport function formatFullDate(d) {\r\n  return (\r\n    formatZero(d.getDate()) +\r\n    '/' +\r\n    formatZero(d.getMonth()) +\r\n    '/' +\r\n    formatZero(d.getFullYear())\r\n  );\r\n}\r\n\r\n/**\r\n * Configurações da tela realizadas no carregamento da aplicação\r\n * de acordo com o estado de login do usuário.\r\n */\r\n$(function () {\r\n  let isLoggedIn = localStorage.getItem(LOGGED_IN_KEY);\r\n\r\n  let menu = isLoggedIn ? '/menu.html' : '/menu-anonimo.html';\r\n  $('#menu').load(menu);\r\n  $('#footer').load('/footer.html');\r\n\r\n  setTimeout(function () {\r\n    $('.sidenav').sidenav();\r\n    document.querySelector('#year').textContent = currentYear();\r\n  }, 1000);\r\n});\r\n\r\nexport { USERNAME_KEY, COSTS_KEY as TOTAL_COSTS_KEY, LOGGED_IN_KEY };\r\n","'use strict';\r\n\r\nimport {\r\n  TAX_BANK_STATEMENT,\r\n  TOTAL_COSTS_KEY,\r\n  USERNAME_KEY,\r\n  formatFullDate,\r\n} from '../../util/shared.js';\r\n\r\nfunction doBankStatement() {\r\n  let totalCosts = parseFloat(localStorage.getItem(TOTAL_COSTS_KEY));\r\n  totalCosts += TAX_BANK_STATEMENT;\r\n  localStorage.setItem(TOTAL_COSTS_KEY, totalCosts);\r\n\r\n  let user = JSON.parse(localStorage.getItem(USERNAME_KEY));\r\n\r\n  const transactions = user.transactions;\r\n  let text = $('#table-statement').html();\r\n\r\n  for (let i in transactions) {\r\n    var t = transactions[i];\r\n    text +=\r\n      '<tr><td>' +\r\n      formatFullDate(new Date(t.date)) +\r\n      '</td><td>' +\r\n      t.type +\r\n      '</td><td>' +\r\n      t.value.toFixed(2) +\r\n      '</td><td>' +\r\n      t.tax.toFixed(2) +\r\n      '</td></tr>';\r\n  }\r\n\r\n  $('#table-statement').html(text);\r\n\r\n  //saldo\r\n  $('#div-balance').text('R$ ' + user.balance.toFixed(2));\r\n}\r\n\r\n/**\r\n * Executa imediatamente o DOM estiver pronto.\r\n */\r\n$(function () {\r\n  doBankStatement();\r\n});\r\n"],"names":["$a83e2fa20425951c45ec420592c197de$var$formatZero","date","parseInt","$","menu","localStorage","getItem","load","setTimeout","sidenav","document","querySelector","textContent","Date","getFullYear","totalCosts","parseFloat","setItem","user","JSON","parse","transactions","text","html","i","t","d","getDate","getMonth","type","value","toFixed","tax","balance","$50fd242e49e0fecf7078af172dd46e5b$var$doBankStatement"],"version":3,"file":"extrato.ca8cd167.js.map"}