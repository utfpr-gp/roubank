{"mappings":"AACO,SAAAA,EAAqBC,EAAOC,EAAKC,EAAMC,GAC5CC,KAAKJ,MAAQA,EACbI,KAAKH,IAAMA,EACXG,KAAKF,KAAOA,EACZE,KAAKD,KAAOA,ECmCdE,GAAE,eAGIC,EAFaC,aAAaC,QArCV,aAuCI,aAAe,qBACvCH,EAAE,SAASI,KAAKH,GAChBD,EAAE,WAAWI,KAAK,gBAElBC,YAAW,WACTL,EAAE,YAAYM,UACdC,SAASC,cAAc,SAASC,iBA9BvBC,MAAOC,gBA+Bf,QCKLC,OAAOC,OAAS,WACdN,SAASO,MAAM,GAAGC,SAAW,SAAUC,GACrCA,EAAEC,iBA5CN,iBACQtB,EAAQuB,WAAWlB,EAAE,mBAAmBmB,OACxCC,EAAOC,KAAKC,MAAMpB,aDbL,oBCefN,EDPsB,ICOhBD,KAENA,EAAQC,EAAMwB,EAAKG,eACrBvB,EAAE,mBAAmBwB,SAAS,oBAC9BxB,EAAE,iBACCyB,KAAK,+BACLC,YACAC,MAAM,KACNC,WACI,EAGTR,EAAKG,SAAW5B,EAAQC,QAElBiC,EAAAA,IAAAA,EAA8BlC,EAAOC,EDzBhB,QCyBgBA,IAAwBc,MACnEU,EAAKU,aAAaC,KAAKF,GACvB3B,aAAa8B,QD/BM,cC+BgBX,KAAKY,UAAUb,IAElDpB,EAAE,iBACCkC,YAAY,OACZV,SAAS,QACTC,KAAAA,eACgB9B,EAAMwC,QACnB,uDACoDvC,EAAIuC,QAAQ,MAEnET,YACAC,MAAM,KACNC,UAEH5B,EAAE,mBAAmBmB,IAAI,IAWvBiB,IAEFpC,EAAE,UAAUqC,KAAK,SAAA,CACfC,SAAS","sources":["./app/model/transaction.js","./app/util/shared.js","./app/pages/saque/withdraw.js"],"sourcesContent":["'use strict';\r\nexport function Transaction(value, tax, type, date) {\r\n  this.value = value;\r\n  this.tax = tax;\r\n  this.type = type;\r\n  this.date = date;\r\n}\r\n","'use strict';\r\n\r\nconst USERNAME_KEY = 'tomaz.leite';\r\nconst COSTS_KEY = 'custos';\r\nconst LOGGED_IN_KEY = 'eh_logado';\r\n\r\nexport const WITHDRAW_TYPE = 'saque';\r\nexport const DEPOSIT_TYPE = 'deposito';\r\n\r\nexport const TAX_DEPOSIT = 0.01;\r\nexport const TAX_WITHDRAW = 0.02;\r\nexport const TAX_BALANCE = 0.25;\r\nexport const TAX_BANK_STATEMENT = 0.25;\r\n\r\n/**\r\n * Retorna o ano corrente com quatro dígitos.\r\n * @returns\r\n */\r\nfunction currentYear() {\r\n  return new Date().getFullYear();\r\n}\r\n\r\nfunction formatZero(date) {\r\n  return parseInt(date) < 10 ? '0' + date : date;\r\n}\r\n\r\nexport function formatFullDate(d) {\r\n  return (\r\n    formatZero(d.getDate()) +\r\n    '/' +\r\n    formatZero(d.getMonth()) +\r\n    '/' +\r\n    formatZero(d.getFullYear())\r\n  );\r\n}\r\n\r\n/**\r\n * Configurações da tela realizadas no carregamento da aplicação\r\n * de acordo com o estado de login do usuário.\r\n */\r\n$(function () {\r\n  let isLoggedIn = localStorage.getItem(LOGGED_IN_KEY);\r\n\r\n  let menu = isLoggedIn ? '/menu.html' : '/menu-anonimo.html';\r\n  $('#menu').load(menu);\r\n  $('#footer').load('/footer.html');\r\n\r\n  setTimeout(function () {\r\n    $('.sidenav').sidenav();\r\n    document.querySelector('#year').textContent = currentYear();\r\n  }, 1000);\r\n});\r\n\r\nexport { USERNAME_KEY, COSTS_KEY as TOTAL_COSTS_KEY, LOGGED_IN_KEY };\r\n","'use strict';\r\n\r\nimport {\r\n  TAX_WITHDRAW,\r\n  USERNAME_KEY,\r\n  WITHDRAW_TYPE,\r\n} from '../../util/shared.js';\r\n\r\nimport { Transaction } from '../../model/transaction.js';\r\n\r\n/**\r\n\tRealiza o saque\r\n*/\r\nfunction doWithdraw() {\r\n  const value = parseFloat($('#input-withdraw').val());\r\n  const user = JSON.parse(localStorage[USERNAME_KEY]);\r\n\r\n  let tax = value * TAX_WITHDRAW;\r\n\r\n  if (value + tax > user.balance) {\r\n    $('#input-withdraw').addClass('my-invalid-input');\r\n    $('#msg-withdraw')\r\n      .html('Opps!!! Saldo insuficiente!')\r\n      .slideDown()\r\n      .delay(3000)\r\n      .slideUp();\r\n    return false;\r\n  }\r\n\r\n  user.balance -= value + tax;\r\n\r\n  const transaction = new Transaction(value, tax, WITHDRAW_TYPE, new Date());\r\n  user.transactions.push(transaction);\r\n  localStorage.setItem(USERNAME_KEY, JSON.stringify(user));\r\n\r\n  $('#msg-withdraw')\r\n    .removeClass('red')\r\n    .addClass('blue')\r\n    .html(\r\n      `Saque de R$ ${value.toFixed(\r\n        2\r\n      )} realizado com sucesso com uma pequena taxa de R$ ${tax.toFixed(2)}`\r\n    )\r\n    .slideDown()\r\n    .delay(3000)\r\n    .slideUp();\r\n\r\n  $('#input-withdraw').val('');\r\n\r\n  return false;\r\n}\r\n\r\n/**\r\n * Dispara quando o DOM está pronto e também os recursos dependentes (CSS, Imagens e JS)\r\n */\r\nwindow.onload = function () {\r\n  document.forms[0].onsubmit = function (e) {\r\n    e.preventDefault();\r\n    doWithdraw();\r\n  };\r\n  $('.money').mask('000.00', {\r\n    reverse: true,\r\n  });\r\n};\r\n"],"names":["$9015cb1fd183f081530878d23decbcb7$export$Transaction","value","tax","type","date","this","$","menu","localStorage","getItem","load","setTimeout","sidenav","document","querySelector","textContent","Date","getFullYear","window","onload","forms","onsubmit","e","preventDefault","parseFloat","val","user","JSON","parse","balance","addClass","html","slideDown","delay","slideUp","transaction","transactions","push","setItem","stringify","removeClass","toFixed","$b57471a202e8a3d7cd3f02e5f3f2f8a0$var$doWithdraw","mask","reverse"],"version":3,"file":"saque.97b77c97.js.map"}