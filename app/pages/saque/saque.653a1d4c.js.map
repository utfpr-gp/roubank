{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCCO,SAASC,EAAYC,EAAOC,EAAKC,EAAMC,GAC5CC,KAAKJ,MAAQA,EACbI,KAAKH,IAAMA,EACXG,KAAKF,KAAOA,EACZE,KAAKD,KAAOA,SDkDVE,OAAA,WACFC,SAAEC,MAAU,GAAKC,SAAU,SAAAC,GACzBA,EAAAC,4BA5CF,MAAIV,EAAMW,WAAQC,EAAA,mBAAAC,OAEdC,EAAQC,KAAMC,MAAKC,aAASpB,EAAAqB,mBAC9BjB,EAAED,EAAAH,EAAmBsB,gBACrBnB,EAAEC,EAAAa,EACCM,QAOD,OAHFR,EAAA,mBAAaS,SAAA,oBACdT,EAAA,iBAAAU,KAAA,+BAAAC,YAAAC,MAAA,KAAAC,WAEI,EAGLX,EAAKM,SAAApB,EAAkBC,EACvB,MAAAyB,EAAoB,IAAC3B,EAAAC,EAAmBC,EAASJ,EAAO8B,cAAC,IAAAC,MAEzDd,EAAEe,aAAgBC,KACfJ,GAWHT,aAAEc,QAAmBlC,EAAOqB,aAACH,KAAAiB,UAAAlB,IAE7BF,EAAA,iBAAaqB,YAAA,OAAAZ,SAAA,QAAAC,KAAA,eAAAtB,EAAAkC,QAAA,uDAAAjC,EAAAiC,QAAA,MAAAX,YAAAC,MAAA,KAAAC,UACdb,EAAA,mBAAAC,IAAA,IAYIsB","sources":["app/pages/saque/withdraw.js","app/model/transaction.js"],"sourcesContent":["'use strict';\r\n\r\nimport { TAX_WITHDRAW, USERNAME_KEY, WITHDRAW_TYPE } from '/app/util/shared.js';\r\n\r\nimport { Transaction } from '/app/model/transaction.js';\r\n\r\n/**\r\n\tRealiza o saque\r\n*/\r\nfunction doWithdraw() {\r\n  const value = parseFloat($('#input-withdraw').val());\r\n  const user = JSON.parse(localStorage[USERNAME_KEY]);\r\n\r\n  let tax = value * TAX_WITHDRAW;\r\n\r\n  if (value + tax > user.balance) {\r\n    $('#input-withdraw').addClass('my-invalid-input');\r\n    $('#msg-withdraw')\r\n      .html('Opps!!! Saldo insuficiente!')\r\n      .slideDown()\r\n      .delay(3000)\r\n      .slideUp();\r\n    return false;\r\n  }\r\n\r\n  user.balance -= value + tax;\r\n\r\n  const transaction = new Transaction(value, tax, WITHDRAW_TYPE, new Date());\r\n  user.transactions.push(transaction);\r\n  localStorage.setItem(USERNAME_KEY, JSON.stringify(user));\r\n\r\n  $('#msg-withdraw')\r\n    .removeClass('red')\r\n    .addClass('blue')\r\n    .html(\r\n      `Saque de R$ ${value.toFixed(\r\n        2\r\n      )} realizado com sucesso com uma pequena taxa de R$ ${tax.toFixed(2)}`\r\n    )\r\n    .slideDown()\r\n    .delay(3000)\r\n    .slideUp();\r\n\r\n  $('#input-withdraw').val('');\r\n\r\n  return false;\r\n}\r\n\r\n/**\r\n * Dispara quando o DOM está pronto e também os recursos dependentes (CSS, Imagens e JS)\r\n */\r\nwindow.onload = function () {\r\n  document.forms[0].onsubmit = function (e) {\r\n    e.preventDefault();\r\n    doWithdraw();\r\n  };\r\n  $('.money').mask('000.00', {\r\n    reverse: true,\r\n  });\r\n};\r\n","'use strict';\r\nexport function Transaction(value, tax, type, date) {\r\n  this.value = value;\r\n  this.tax = tax;\r\n  this.type = type;\r\n  this.date = date;\r\n}\r\n"],"names":["$bV6rM","parcelRequire","$0f5bed92a4ab5602$export$febc5573c75cefb0","value","tax","type","date","this","onload","document","forms","onsubmit","e","preventDefault","parseFloat","$","val","user","JSON","parse","localStorage","USERNAME_KEY","TAX_WITHDRAW","balance","addClass","html","slideDown","delay","slideUp","transaction","WITHDRAW_TYPE","Date","transactions","push","setItem","stringify","removeClass","toFixed","$51279e36c7343df9$var$doWithdraw"],"version":3,"file":"saque.653a1d4c.js.map"}